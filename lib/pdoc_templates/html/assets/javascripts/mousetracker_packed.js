if(typeof MooTools=="undefined"){throw"MooTools must be loaded in order to use MouseTracker!"}if(typeof Bounga=="undefined"){Bounga={}}Bounga.MouseTracker=new Class({Implements:[Options],points:[],tracepoints:[],boundElement:null,options:{id:null,"class":null,delay:200,offset:{x:-20,y:20},top:-1000,left:-1000,position:"absolute",color:"#666",size:20,"z-index":20,image:null},initialize:function(A){this.setOptions(A);var D={id:this.options.id,"class":this.options["class"],styles:{position:this.options.position,top:this.options.top,left:this.options.left,"z-index":this.options["z-index"]}};if($chk(this.options.image)){var C={src:this.options.image};this.cursor=new Element("img",$merge(D,C))}else{var B={styles:{height:this.options.size,width:this.options.size,"background-color":this.options.color}};this.cursor=new Element("div",$merge(D,B))}this.cursor.inject(document.body);this.boundElement=this.listener.bindWithEvent(this);window.addEvent("mousemove",this.boundElement);return this},listener:function(A){$clear(this.timeout);this.points.push($merge(A.page,{t:new Date().getTime()}));this.timeout=this.traceback.delay(this.options.delay,this)},traceback:function(){this.tracepoints=$A(this.points);this.points=[];this.animate()},animate:function(){var A=this.tracepoints.length;if(A){var B=this.tracepoints.shift();this.cursor.setStyles({top:B.y+this.options.offset.y,left:B.x+this.options.offset.x});if(A>1){var C=this.tracepoints[0].t-B.t;this.animate.delay(C,this)}}},detach:function(){window.removeEvent("mousemove",this.boundElement)},detach:function(){window.removeEvent("mousemove",this.boundElement)}});